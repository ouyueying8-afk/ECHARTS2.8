<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>不婚不育情绪倾向分析图表</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background-color: #fffafc;
            padding: 10px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chart-container {
            flex: 1;
            width: 100%;
            min-height: 0;
        }
        
        #chart {
            width: 100%;
            height: 100%;
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            #chart {
                min-height: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <div id="chart"></div>
    </div>

    <script>
        // 初始化ECharts实例
        const chartDom = document.getElementById('chart');
        const myChart = echarts.init(chartDom);
        
        // 标签配置
        const labelRight = {
            position: 'right',
            color: '#fff',
            fontWeight: 'bold'
        };

        const labelLeft = {
            position: 'insideLeft',
            color: '#fff',
            fontWeight: 'bold'
        };

        // 图表配置
        const option = {
            title: {
                text: '不婚不育情绪倾向分析',
                left: 'center',
                top: '5%',
                textStyle: {
                    fontSize: 22,
                    fontWeight: 'bold',
                    color: '#d81b60',
                    textShadow: '0 2px 4px rgba(216, 27, 96, 0.2)'
                },
                subtext: '基于情绪标签的强度分析（浅色渐变表示）',
                subtextStyle: {
                    color: '#c2185b',
                    fontSize: 14,
                    fontWeight: 'normal'
                },
                padding: [0, 0, 30, 0]
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow',
                    shadowStyle: {
                        color: 'rgba(216, 27, 96, 0.1)'
                    }
                },
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                borderColor: '#f8bbd9',
                borderWidth: 1,
                textStyle: {
                    color: '#880e4f'
                },
                extraCssText: 'box-shadow: 0 4px 12px rgba(216, 27, 96, 0.15); border-radius: 8px;',
                formatter: function(params) {
                    let result = `<div style="color:#d81b60;font-weight:bold;margin-bottom:8px;border-bottom:1px solid #f8bbd9;padding-bottom:4px">${params[0].name}</div>`;
                    params.forEach(item => {
                        const value = item.value;
                        const sign = value >= 0 ? '+' : '';
                        const color = value >= 0 ? '#4caf50' : '#f44336';
                        const emotionType = value >= 0 ? '(正面)' : '(负面)';
                        result += `<div style="display:flex;align-items:center;margin:6px 0;">`;
                        result += `<span style="display:inline-block;margin-right:8px;border-radius:50%;width:10px;height:10px;background-color:${item.color}"></span>`;
                        result += `<span style="flex:1">${item.seriesName}${emotionType}</span>`;
                        result += `<span style="color:${color};font-weight:bold;margin-left:10px">${sign}${value}</span>`;
                        result += `</div>`;
                    });
                    return result;
                }
            },
            grid: {
                top: '18%',
                bottom: '12%',
                left: '12%',
                right: '10%',
                containLabel: true
            },
            xAxis: {
                type: 'value',
                position: 'top',
                splitLine: {
                    lineStyle: {
                        type: 'dashed',
                        color: '#f8bbd9'
                    }
                },
                axisLine: {
                    lineStyle: {
                        color: '#f48fb1'
                    }
                },
                axisLabel: {
                    color: '#c2185b',
                    fontSize: 12
                },
                name: '情绪强度',
                nameLocation: 'end',
                nameTextStyle: {
                    color: '#ad1457',
                    fontSize: 13,
                    padding: [10, 0, 0, 0]
                }
            },
            yAxis: {
                type: 'category',
                axisLine: { 
                    show: false 
                },
                axisTick: { 
                    show: false 
                },
                axisLabel: {
                    color: '#880e4f',
                    fontSize: 13,
                    margin: 12,
                    formatter: function(value, index) {
                        const emotionType = index < 6 ? '{positive|(正面)}' : '{negative|(负面)}';
                        return `{label|${value}} ${emotionType}`;
                    },
                    rich: {
                        label: {
                            color: '#880e4f',
                            fontWeight: 'bold'
                        },
                        positive: {
                            color: '#4caf50',
                            fontWeight: 'normal',
                            fontSize: 11,
                            padding: [0, 0, 0, 5]
                        },
                        negative: {
                            color: '#f44336',
                            fontWeight: 'normal',
                            fontSize: 11,
                            padding: [0, 0, 0, 5]
                        }
                    }
                },
                splitLine: { 
                    show: false 
                },
                data: [
                    '快乐度',
                    '安心度', 
                    '喜爱度',
                    '尊敬度',
                    '赞扬度',
                    '相信度',
                    '哀伤度',
                    '恐惧度',
                    '愤怒度',
                    '厌恶度'
                ]
            },
            series: [
                {
                    name: '情绪强度',
                    type: 'bar',
                    barWidth: '70%',
                    barGap: '0%',
                    barCategoryGap: '15%',
                    label: {
                        show: true,
                        formatter: function(params) {
                            const value = params.value;
                            return value >= 0 ? `+${value}` : `${value}`;
                        }
                    },
                    itemStyle: {
                        color: function(params) {
                            const value = params.value;
                            const index = params.dataIndex;
                            
                            if (index < 6) {
                                const intensity = Math.min(value / 200, 1);
                                return {
                                    type: 'linear',
                                    x: 0,
                                    y: 0,
                                    x2: 1,
                                    y2: 0,
                                    colorStops: [
                                        {
                                            offset: 0,
                                            color: `rgba(248, 187, 217, ${0.7 + intensity * 0.3})`
                                        },
                                        {
                                            offset: 0.5,
                                            color: `rgba(236, 64, 122, ${0.8 + intensity * 0.2})`
                                        },
                                        {
                                            offset: 1,
                                            color: `rgba(216, 27, 96, ${0.9 + intensity * 0.1})`
                                        }
                                    ]
                                };
                            } else {
                                const intensity = Math.min(Math.abs(value) / 100, 1);
                                return {
                                    type: 'linear',
                                    x: 0,
                                    y: 0,
                                    x2: 1,
                                    y2: 0,
                                    colorStops: [
                                        {
                                            offset: 0,
                                            color: `rgba(186, 104, 200, ${0.7 + intensity * 0.3})`
                                        },
                                        {
                                            offset: 0.5,
                                            color: `rgba(156, 39, 176, ${0.8 + intensity * 0.2})`
                                        },
                                        {
                                            offset: 1,
                                            color: `rgba(123, 31, 162, ${0.9 + intensity * 0.1})`
                                        }
                                    ]
                                };
                            }
                        },
                        borderRadius: [0, 15, 15, 0],
                        borderWidth: 0
                    },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 15,
                            shadowColor: 'rgba(216, 27, 96, 0.4)',
                            opacity: 1,
                            borderColor: '#fff',
                            borderWidth: 2
                        },
                        label: {
                            show: true,
                            color: '#fff',
                            fontWeight: 'bold',
                            fontSize: 13
                        }
                    },
                    data: [
                        { 
                            value: 186,
                            label: labelLeft
                        },
                        { 
                            value: 45,
                            label: labelLeft
                        },
                        { 
                            value: 89,
                            label: labelLeft
                        },
                        { 
                            value: 32,
                            label: labelLeft
                        },
                        { 
                            value: 76,
                            label: labelLeft
                        },
                        { 
                            value: 28,
                            label: labelLeft
                        },
                        { 
                            value: -34,
                            label: labelRight
                        },
                        { 
                            value: -21,
                            label: labelRight
                        },
                        { 
                            value: -67,
                            label: labelRight
                        },
                        { 
                            value: -89,
                            label: labelRight
                        }
                    ]
                }
            ],
            dataZoom: [
                {
                    type: 'slider',
                    show: true,
                    yAxisIndex: [0],
                    right: 20,
                    width: 20,
                    start: 0,
                    end: 100,
                    handleStyle: {
                        color: '#f8bbd9',
                        borderColor: '#d81b60'
                    },
                    textStyle: {
                        color: '#880e4f'
                    },
                    borderColor: '#f8bbd9',
                    fillerColor: 'rgba(248, 187, 217, 0.3)'
                }
            ],
            legend: {
                top: '15%',
                left: 'center',
                itemWidth: 25,
                itemHeight: 12,
                textStyle: {
                    color: '#880e4f',
                    fontSize: 12
                },
                data: [
                    {
                        name: '正面情绪',
                        itemStyle: {
                            color: {
                                type: 'linear',
                                x: 0,
                                y: 0,
                                x2: 1,
                                y2: 0,
                                colorStops: [
                                    { offset: 0, color: 'rgba(248, 187, 217, 1)' },
                                    { offset: 1, color: 'rgba(216, 27, 96, 1)' }
                                ]
                            },
                            borderRadius: 6
                        }
                    },
                    {
                        name: '负面情绪',
                        itemStyle: {
                            color: {
                                type: 'linear',
                                x: 0,
                                y: 0,
                                x2: 1,
                                y2: 0,
                                colorStops: [
                                    { offset: 0, color: 'rgba(186, 104, 200, 1)' },
                                    { offset: 1, color: 'rgba(123, 31, 162, 1)' }
                                ]
                            },
                            borderRadius: 6
                        }
                    }
                ]
            },
            backgroundColor: {
                type: 'linear',
                x: 0,
                y: 0,
                x2: 0,
                y2: 1,
                colorStops: [
                    { offset: 0, color: 'rgba(255, 250, 252, 1)' },
                    { offset: 1, color: 'rgba(255, 245, 248, 0.8)' }
                ]
            }
        };

        // 应用配置
        myChart.setOption(option);

        // 响应窗口大小变化
        window.addEventListener('resize', function() {
            myChart.resize();
        });
    </script>
</body>
</html>